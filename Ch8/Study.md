## 8.1 변수의 속성과 범위

---
```
변수의 범위: 변수가 프로그램 내에서 접근 가능한 범위를 의미함

지역변수: 함수 내부에서 선언되며, 해당 함수 내에서만 접근이 가능하고, 함수가 종료되면 메모리에서 해제된다.
전역변수: 전처리기부분에서 선언되고, 실행시 바로 메모리에 할당되며, 프로그램 내 모든 곳에서 접근이 가능하다. 프로그램 시작 시 메모리에 할당되고, 종료시 해제된다.
```

---
** 변수의 지속 기간(Lifetime) **
---
```
정의: 변수가 메모리에 유지되는 기간을 의미한다.
1. 자동 지속 기간: 함수 호출 시 메모리에 할당되고, 종료시 해제되는 형태이다.
2. 정적 지속 기간: 프로그램 실행 시작부터 종료까지 메모리에 유지된다. (Static 변수)
   *지역변수에도 Static 선언이 가능하다.
   추가적으로 일반 지역변수는 종료 시 수명이 끝나지만, static 지역변수는 프로그램 끝까지 유지된다. 반면 전역변수는 모든 경우에서 프로그램 끝까지 수명이 유지된다.
---
```

---
** 변수의 연결 **
---
```
정의: 변수의 범위와 수명을 정의, 여러 파일에서 변수 접근 가능 여부를 결정함
1. 내부 연결: static 지정자로 선언된 전역변수는 해당 파일 내부에서만 접근이 가능함
2. 외부 연결: 일반적인 전역변수는 다른 파일에서 접근이 가능하고, extern 키워드를 통해서 접근이 가능하다.
---
```

---
** 지역변수
---
```c
특징: 함수 내부에서 선언되는 지역변수는 해당 함수 블록 내에서만 접근이 가능하다.(지역변수는 초기화를 하지 않으면 Garbage값이 들어가게 된다.)
예시) int other(void){
      int found = 0;

      if(found == 0){
        int mode = 2;
      }
      mode = 0;//(mode는 if문 내부에있는 변수이므로 접근이 불가->컴파일 오류 발생)
      found = 100; //found는 같은 other함수 내부에 있기 때문에 접근가능 -> 값이 변경됨
    }
```
---


---
** 지역변수와 매개변수
---
```c
1. 변수를 매개변수로 사용하는 경우
int other(int num, char a){
  if(found == 0){
    int mode = 2;
  }
  num =10; //other함수에 정의된 매개변수인 int num, char a(매개변수)들을 변수로 사용하였다.
  a = 'F'
}
```
---
2. 함수 블록 내 일반 변수로 사용하는 경우
```c
int other(){
  int num;
  char a;

    if(found == 0){
      int mode = 2;
      
    }
    num = 10;
    char a = 'F'
}
```
---
3. 지역변수의 선언과 사용
---
-> 변수명이 동일하더라도 선언 위치가 다르면 각각 다른 변수로 인식한다.
```c
int other(int num, char a){
  if(found == 0){
    int mode = 2;
  }
  num =10; //other함수에 정의된 매개변수인 int num, char a(매개변수)들을 변수로 사용하였다.
  a = 'F'
}
```
---
```c
int main(){
  int num, res;
  char a;

  num = 100;    //main함수에서 정의된 num과 char의 값을 '복사'해서 other함수에다가 값을 전달한다는 느낌으로 보면 된다.
  char = 'F'    //서로 동기화 되는 형태는 아니고 그냥 main함수 -> other함수로 값만 전달된다는 느낌으로 보면 된다.

  res = other(num, alp);
}
```
---
** 지역변수의 지속 시간 **
---

--> 지역변수가 선언된 블록의 실행이 시작될 때 스택 메모리에 지역변수가 할당된디.(지속시간 = 메모리에 존재하는 시간)

---
** 전역변수
---
```
특징: 함수의 외부 or 전처리기부분에 선언
초기화: 전역변수를 명시적으로 초기화하지 않으면 0 또는 해당 자료형의 초기값으로 자동초기화됨.
지속 기간: 프로그램의 실행 시작부터 종료까지 메모리에 유지
저장 영역: 메모리의 데이터 영역
접근 범위: 프로그램의 어디에서나 접근 및 수정이 가능, 모든 함수가 해당 변수에 접근이 가능함
```

---
** 전역변수 사용시 주의점
---
```
1. 데이터의 동기화에 주의한다.
2. 남용시 사용 범위를 깨뜨릴 가능성이 있으므로 필요시에만 사용한다.
3. 여러 파일에서 같은 이름의 전역변수를 사용하면 충돌 가능성이 있다.(이는 static 지정를 사용하면 해당 파일 내에서만 접근 가능한 전역변수로 선언이 가능하다.)
```

---
** 전역변수의 초깃값과 지속시간
---
```
1. 전역변수는 하나의 함수 호출이 끝나고 다른 함수가 호출되더라도 그 값이 유지된다.
2. 지역변수는 호출이 종료되면 소멸하지만, 전역변수는 살아있다.
3. 중요하게 정보를 유지하면서 저장해야할때 사용하는것이 좋다.
4. 전역변수는 '컴파일러'에 의해 자동으로 초기화된다.
```


---
** 확인문제
---
```
1. 지역변수와 전역변수의 대한 설명으로 옳지 않은 것은?
   ->  (3) 지역변수와 전역변수의 이름이 같은 경우에는 전역변수의 우선순위가 더 높다(x)

     --> 지역변수가 더 우선순위가 높다.

2. 지역변수의 (지속 기간)은 변수가 메모리에 존재하는 시간을 의미하며, 일반적으로 해당 변수가 선언된 함수의 실행시간에 국한된다.
```


## 8.2 변수의 지속 기간

--
**정적 할당
--
```
1. 프로그램의 실행 시작 지점부터 메모리가 할당됨.
2. 실행 종료 시점에 메모리가 해제됨.
3. 전역변수 및 static 지정자로 선언된 지역변수가 사용된 정적 할당이다.
```

---
**정적 할당 사용 예시
---
```c
int globalVar;

void func(){
  static int staticVar;
}

--> 여기서 static이 쓰였으니 프로그램 끝까지 변수의 값이 유지된다. static이 쓰였으니 호출되어도 값이 바뀌면 안됨. 메모리에 한번만 할당되고, 함수가 끝나도 사라지지않음.
```


---
**자동 할당 사용 예시
---
```
>> 자동할당은 함수가 호출 될 때 메모리에 할당된다. 함수가 반환될 때 메모리에서 해제가 된다.
void func(){
  int autoVar;
}
--> 지역변수 autoVar이 자동으로 할당되었고, 함수 블록이 종료되면 변수값이 유지되지 않고 사라짐(static과의 차이점)
```

---
**저장 유형 지정자
---
```
1. auto 지정자
-> 자동변수, 지역변수를 선언할 때 사용한다.
2. register 지정자
-> 레지스터 변수, CPU의 레지스터에 변수가 저장된다.
3. volitaile 지정자
-> 컴파일러에 의해 변수 최적화 방지
4. static 지정자(중요)
-> 정적 변수로 선언하면 변수가 초기화될 때 메모리에 할당되고, 프로그램 실행 종료까지 유지된다.(지역변수는 끝까지 유지되는 성질을 갖고있다.)
   이말이 무엇이냐 하면, 일반 지역변수는 호출될때마다 스택 메모리가 새로 생성되는 반면에, 정적 지역변수는 프로그램 종료시까지 초기화를 한번하면 그 값을 그대로 끝까지 들고간다.
```


---
**확인 문제
---
```
1. 변수를 선언할 때 저장 유형 지정자를 사용하여 해당 변수의 동작과 특성을 정의할 수 있다. 지역변수의 저장 유형에 따라 (auto), (register), (volitile), (static)등의 지정자를 사용할 수 있다.
2. (전역변수)은 프로그램의 실행 시작 시점에 메모리가 할당되고 종료 시점에 메모리에서 해제되는 방식이고, (지역변수)은 함수가 호출될 때 메모리가 할당되고 함수가 반환할 때 메모리에서 해제된다.
```

---
**8.3~8.4 교수님께서 skip
---


---
**8.5 변수와 함수의 연결
---

```
1. 내부 연결
-> 코드의 모듈화와 데이터 은닉을 위해 사용
2. 파일 범위
-> 내부 연결을 가진 변수(정적할당 전역변수)는 선언된 파일 내에서만 유효하다.
-> 다른 파일에서는 이 변수를 직접 참조가 불가능하다.
3. Static 지정자
-> 내부 연결을 가진 변수를 선언할 때 사용한다.
-> static키워드는 변수의 연결성을 제한하여 파일 내에서만 접근 가능하게 한다.
지역변수 static: 값을 유지, 전역변수 static: 파일 내에서만 사용가능 -> 다른 .c에서 접근이 불가능함(캡슐화의 원리)

또한, 지역변수>전역변수
->가까운 것부터 호출한다.(호출하는 블록 기준) 

*main함수는 한 프로젝트당 하나만 존재할 수 있으므로, 두개가 있을 경우에는 하나를 주석처리하던가 해야한다.
```

```
4. 외부 연결
-> 변수나 함수를 소스 파일간에 공유시키기 위한 링크 속성
5. 외부 연결 함수
-> 하나의 소스 파일에서 정의된 함수가 다른 소스 파일에서 호출이 가능하다.
6. 외부 연결 변수
-> extern 키워드로 변수에 외부 연결이 부여 가능하다.(특정 파일의 전역변수를 다른 동일 프로젝트내로 불러들여올때)
```
```
사용 예시)
(1) sub.c에서 전역변수로 선언한 int num = 10;이 있다
(2) main.c의 전처리기부에서 extern int num;을 선언하여 외부 연결로 sub.c의 변수를 가져옴
(3) main.c의 main함수 내에서 sub.c의 함수인 void func()을 main.c의 main함수 내에서는 func();으로 외부함수를 호출할 수 있다.
```

